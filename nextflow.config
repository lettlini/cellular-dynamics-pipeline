profiles {
    local {
        workDir = "/mnt/DATA/Nextflow/work"

        params {
            parent_indir = "/mnt/BACKUP/data/"
            parent_outdir = "/mnt/BACKUP/out/"
        }

        process {
            executor = 'local'
            cpus = 1
            memory = "4 GB"
            beforeScript = """
                mamba activate cmot-pipeline
            """

            // High CPU processes
            withLabel: high_cpu {
                cpus = 10
            }
        }
    }

    cluster {
        workDir = "/work/kl63sahy-monolayer/nextflow/work"

        params {
            parent_indir = "/work/kl63sahy-monolayer/data/"
            parent_outdir = "/work/kl63sahy-monolayer/out/"
        }

        process {
            executor = "slurm"
            queue = "paul"
            memory = "12GB"
            cpus = 12
            beforeScript = """
                source /software/easybuild/el8/amd_zen1/all/Mamba/23.1.0-4/etc/profile.d/conda.sh
                module load Mamba
                conda activate cmot-pipeline
            """
            time = "2h"
            // High CPU processes
            withLabel: high_cpu {
                cpus = 48
            }
            withLabel: low_cpu {
                cpus = 2
            }

            withLabel: short_running {
                time = "30m"
            }

            withLabel: long_running {
                time = "6h"
            }
        }
    }
}
